#pragma checksum "D:\Ariston Projects\WhatsApp_Webhook\WhatsApp_Webhook\Pages\NPS_Dashboard.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "d598a115f70e42e3d37e155b7c6fc137659bf344"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(WhatsApp_Webhook.Pages.Pages_NPS_Dashboard), @"mvc.1.0.razor-page", @"/Pages/NPS_Dashboard.cshtml")]
namespace WhatsApp_Webhook.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 2 "D:\Ariston Projects\WhatsApp_Webhook\WhatsApp_Webhook\Pages\_ViewImports.cshtml"
using WhatsApp_Webhook;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\Ariston Projects\WhatsApp_Webhook\WhatsApp_Webhook\Pages\_ViewImports.cshtml"
using WhatsApp_Webhook.Utilities;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\Ariston Projects\WhatsApp_Webhook\WhatsApp_Webhook\Pages\_ViewImports.cshtml"
using NPS.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"d598a115f70e42e3d37e155b7c6fc137659bf344", @"/Pages/NPS_Dashboard.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"cb6450445bb81342b7e110d721a00f5eb82aab71", @"/Pages/_ViewImports.cshtml")]
    public class Pages_NPS_Dashboard : global::Microsoft.AspNetCore.Mvc.RazorPages.Page
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n");
#nullable restore
#line 4 "D:\Ariston Projects\WhatsApp_Webhook\WhatsApp_Webhook\Pages\NPS_Dashboard.cshtml"
  
    ViewData["Title"] = "NPS Dashboard";

#line default
#line hidden
#nullable disable
            WriteLiteral("<div id=\"display\"></div>\r\n<label id=\"connetion-status\" style=\"margin-left: 17px;\"></label>\r\n<div class=\"container\">\r\n    <h2>Chart.js â€” Pie Chart Demo</h2>\r\n    <div>\r\n        <canvas id=\"myChart\"></canvas>\r\n    </div>\r\n</div>\r\n\r\n");
            DefineSection("Scripts", async() => {
                WriteLiteral(@"
    <script src=""lib/microsoft/signalr/dist/browser/signalr.min.js""></script>
    <script src=""lib/jquery/jquery.min.js""></script>

    <script>
        //TODO: remove the js inside this page.
var labels= [],
var series= []
var ctx = document.getElementById(""myChart"").getContext('2d');
var myChart = new Chart(ctx, {
  type: 'pie',
  data: {
    labels: labels,
    datasets: [{
      backgroundColor: [
        ""#2ecc71"",
        ""#3498db"",
        ""#95a5a6"",
        ""#9b59b6"",
        ""#f1c40f"",
        ""#e74c3c"",
        ""#34495e""
      ],
      data: series
    }]
  }
});




        let startConnection = () => {
            connection.start()
                .then(e => {
                    $(""#connetion-status"").text(""Connection opened"");
                    $(""#connetion-status"").css(""color"", ""green"");
                })
                .catch(err => console.log(err));
        };



        let Invoke = () => {
            alert(""Invoke"");
            connectio");
                WriteLiteral(@"n.invoke(""chartPie"")
                .catch(err => console.log(err));

        };


        let refreshProductList = (js) => {
            $(""#display"").text(js);
            labels.push = js[0];
            series.push = js[1];
            
        }

        ///let connection = new signalR.HubConnection('http://${document.location.host}/charts', 'formatType=json&format=text');
        let connection = new signalR.HubConnectionBuilder().withUrl(""/charts"").build();
        connection.start().then(() => {
            connection.invoke('GetPieChart').catch(err => console.error(err.toString()));
        })
        // startConnection();

        connection.onClosed = e => {
            if (e) {
                $(""#connetion-status"").text(""Connection closed "" + e);
                $(""#connetion-status"").css(""color"", ""red"");
            }
            else {
                $(""#connetion-status"").text(""Connection closed"");
                $(""#connetion-status"").css(""color"", ""green"");
    ");
                WriteLiteral("        }\r\n            startConnection();\r\n        };\r\n\r\n        connection.on(\'chartPie\', js => {\r\n            alert(js[0]);\r\n             alert(js[1]);\r\n            refreshProductList(js);\r\n        });\r\n\r\n\r\n\r\n\r\n    </script>\r\n");
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<WhatsApp_Webhook.Pages.NPS_DashboardModel> Html { get; private set; }
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary<WhatsApp_Webhook.Pages.NPS_DashboardModel> ViewData => (global::Microsoft.AspNetCore.Mvc.ViewFeatures.ViewDataDictionary<WhatsApp_Webhook.Pages.NPS_DashboardModel>)PageContext?.ViewData;
        public WhatsApp_Webhook.Pages.NPS_DashboardModel Model => ViewData.Model;
    }
}
#pragma warning restore 1591
